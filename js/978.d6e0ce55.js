"use strict";(self["webpackChunkdbd_management_system"]=self["webpackChunkdbd_management_system"]||[]).push([[978],{2303:function(e,l,a){a.d(l,{H2:function(){return n},IO:function(){return d},XC:function(){return p},aO:function(){return u},ic:function(){return v},ii:function(){return s},kN:function(){return c},m5:function(){return i},r6:function(){return r},vL:function(){return o},vM:function(){return m},vr:function(){return f}});var t=a(5251);const n=e=>(console.log("页码信息："+e.page),console.log("每页展示："+e.pageSize),t.A.get("/killer",{params:e})),u=()=>t.A.get("/killer/all"),r=e=>t.A.get(`/killer/${e}`),o=e=>t.A.get("/killer/condition",{params:e}),i=e=>t.A.post("/admin/killer/add",e),d=e=>t.A.put("/admin/killer/update",e),s=e=>t.A.delete(`/admin/killer/delete/${e}`),c=e=>(console.log("页码信息："+e.page),console.log("每页展示："+e.pageSize),t.A.get("/skill/killer",{params:e})),v=e=>t.A.get(`/skill/killer/${e}`),p=e=>t.A.post("/admin/skill/killer/add",e),m=e=>t.A.put("/admin/skill/killer/update",e),f=e=>t.A.delete(`/admin/skill/killer/delete/${e}`)},9342:function(e,l,a){a.d(l,{IP:function(){return p},OW:function(){return m},Ow:function(){return n},Q:function(){return f},Q7:function(){return r},QW:function(){return o},T0:function(){return u},TJ:function(){return i},bf:function(){return d},fC:function(){return v},jM:function(){return s},r9:function(){return c}});var t=a(5251);const n=e=>(console.log("页码信息："+e.page),console.log("每页展示："+e.pageSize),t.A.get("/survivor",{params:e})),u=()=>t.A.get("/survivor/all"),r=e=>t.A.get(`/survivor/${e}`),o=e=>t.A.get("/survivor/name",{params:{name:e}}),i=e=>t.A.post("/admin/survivor/add",e),d=e=>t.A.put("/admin/survivor/update",e),s=e=>t.A.delete(`/admin/survivor/delete/${e}`),c=e=>(console.log("页码信息："+e.page),console.log("每页展示："+e.pageSize),t.A.get("/skill/survivor",{params:e})),v=e=>t.A.get(`/skill/survivor/${e}`),p=e=>t.A.post("/admin/skill/survivor/add",e),m=e=>t.A.put("/admin/skill/survivor/update",e),f=e=>t.A.delete(`/admin/skill/survivor/delete/${e}`)},7978:function(e,l,a){a.r(l),a.d(l,{default:function(){return T}});var t=a(1326),n=(a(8380),a(7778),a(6675)),u=(a(3594),a(2575)),r=(a(3233),a(4079)),o=(a(9234),a(988)),i=(a(3843),a(4871)),d=(a(1500),a(4849),a(3429)),s=(a(1236),a(8700),a(5718)),c=(a(4541),a(8015)),v=(a(358),a(1359),a(2033),a(5026),a(4603)),p=a(7419),m=a(7235),f=(a(289),a(1194)),k=(a(8809),a(8358)),g=(a(1514),a(6527),a(9306),a(8589),a(2279)),b=a(9342),w=a(8660),_=a(2796);a(5397);const y=["src"],F={class:"editor"};var h={__name:"SurvivorSkillEdit",emits:["success"],setup(e,{expose:l,emit:a}){const t=(0,p.KR)({modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}]]}}),n=(0,p.KR)(!1),u=(0,p.KR)({}),r={},o={name:"",content:"",imgurl:"",survivorId:null},i=(0,p.KR)(""),h=(0,p.KR)({...o}),A=e=>{console.log(e),i.value=URL.createObjectURL(e.raw),h.value.imgurl=e.raw},S=a,V=async()=>{const e=new FormData;for(let l in h.value)e.append(l,h.value[l]);h.value.id?(await u.value.validate(),await(0,b.OW)(e),_.nk.success("修改成功"),n.value=!1,S("success","edit")):(await u.value.validate(),await(0,b.IP)(e),_.nk.success("添加成功"),n.value=!1,S("success","add")),i.value=""},R=(0,p.KR)(),C=async e=>{if(n.value=!0,e.id){const l=await(0,b.fC)(e.id);h.value=l.data.data,i.value=h.value.imgurl}else h.value={...o},i.value="",(0,v.dY)((()=>{R.value.setHTML("")}))};return l({open:C}),(e,l)=>{const a=s.WK,o=d.xE,b=k.tk,_=f.j5,S=(0,v.g2)("quill-editor"),C=c.S2,z=d.US,I=m.pw;return(0,v.uX)(),(0,v.Wv)(I,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=e=>n.value=e),title:h.value.id?"编辑技能":"新增技能",direction:"rtl",size:"50%"},{default:(0,v.k6)((()=>[(0,v.bF)(z,{ref_key:"form",ref:u,rules:r,model:h.value,"label-width":"100px"},{default:(0,v.k6)((()=>[(0,v.bF)(o,{label:"技能名",prop:"name"},{default:(0,v.k6)((()=>[(0,v.bF)(a,{modelValue:h.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value.name=e),placeholder:"请输入技能名"},null,8,["modelValue"])])),_:1}),(0,v.bF)(o,{label:"所属逃生者"},{default:(0,v.k6)((()=>[(0,v.bF)(w.A,{modelValue:h.value.survivorId,"onUpdate:modelValue":l[1]||(l[1]=e=>h.value.survivorId=e),ownerList:"survivor",width:"220px"},null,8,["modelValue"])])),_:1}),(0,v.bF)(o,{label:"技能图片",prop:"imgurl"},{default:(0,v.k6)((()=>[(0,v.bF)(_,{class:"avatar-uploader","show-file-list":!1,"auto-upload":!1,"on-change":A},{default:(0,v.k6)((()=>[i.value?((0,v.uX)(),(0,v.CE)("img",{key:0,src:i.value,class:"avatar"},null,8,y)):((0,v.uX)(),(0,v.Wv)(b,{key:1,class:"avatar-uploader-icon"},{default:(0,v.k6)((()=>[(0,v.bF)((0,p.R1)(g.FWt))])),_:1}))])),_:1})])),_:1}),(0,v.bF)(o,{label:"技能介绍",prop:"content"},{default:(0,v.k6)((()=>[(0,v.Lk)("div",F,[(0,v.bF)(S,{ref_key:"editorRef",ref:R,content:h.value.content,"onUpdate:content":l[2]||(l[2]=e=>h.value.content=e),"content-type":"html",theme:"snow",options:t.value},null,8,["content","options"])])])),_:1}),(0,v.bF)(o,null,{default:(0,v.k6)((()=>[(0,v.bF)(C,{onClick:V,type:"primary"},{default:(0,v.k6)((()=>l[4]||(l[4]=[(0,v.eW)("提交")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}},A=a(8533);const S=(0,A.A)(h,[["__scopeId","data-v-79a48640"]]);var V=S,R=a(4741),C=a(7462);a(8501);const z={class:"survivor-skill-list"},I={class:"card-header"},K={class:"btns"},L=["innerHTML"],x=["src"];var W={__name:"SurvivorSkill",setup(e){const l=(0,p.KR)([]),a=(0,p.KR)(0),m=(0,p.KR)(!1),f=(0,p.KR)([]),k=(0,p.KR)({page:1,pageSize:5,name:"",survivorId:null}),y=(0,p.KR)();(0,v.wB)((()=>k.value.survivorId),(e=>console.log("survivorId发生了变化",e)));const F=async()=>{m.value=!0;const e=await(0,b.r9)(k.value);console.log(e.data.data),l.value=e.data.data.rows,l.value.forEach((async e=>{const l=await(0,b.Q7)(e.survivorId);null!==l.data.data?e.survivorName=l.data.data.name:e.survivorName="通用技能"})),a.value=e.data.data.total,m.value=!1},h=e=>{k.value.page=1,k.value.pageSize=e,F()},A=e=>{k.value.page=e,F()},S=()=>{k.value.page=1,F()},W=()=>{k.value.page=1,k.value.name="",k.value.survivorId=null,F()},U=async e=>{console.log(e),await C.s.confirm("你确认要删除所选逃生者技能吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await(0,b.Q)(e),_.nk.success("删除成功"),F()},T=()=>{y.value.open({})},X=e=>{y.value.open(e)},O=e=>{f.value=e.map((e=>e.id))},$=e=>{if("add"===e){const e=Math.ceil((a.value+1)/k.value.pageSize);k.value.page=e}F()};return F(),(e,b)=>{const _=c.S2,F=s.WK,C=d.xE,E=d.US,M=r.o8,Q=i.zv,j=o.x0,N=r.Up,H=u.aQ,P=n.Ik,B=t.L;return(0,v.uX)(),(0,v.CE)("div",z,[(0,v.bF)(P,{style:{"max-width":"100vw"}},{header:(0,v.k6)((()=>[(0,v.Lk)("div",I,[b[7]||(b[7]=(0,v.Lk)("span",null,"逃生者技能列表",-1)),(0,v.Lk)("div",K,[(0,v.bF)(_,{type:"primary",onClick:T},{default:(0,v.k6)((()=>b[5]||(b[5]=[(0,v.eW)("添加逃生者技能")]))),_:1}),(0,v.bF)(_,{type:"danger",onClick:b[0]||(b[0]=e=>U(f.value))},{default:(0,v.k6)((()=>b[6]||(b[6]=[(0,v.eW)("批量删除")]))),_:1})])])])),default:(0,v.k6)((()=>[(0,v.bF)(E,{inline:""},{default:(0,v.k6)((()=>[(0,v.bF)(C,{label:"逃生者技能名"},{default:(0,v.k6)((()=>[(0,v.bF)(F,{modelValue:k.value.name,"onUpdate:modelValue":b[1]||(b[1]=e=>k.value.name=e),placeholder:"请输入逃生者技能名"},null,8,["modelValue"])])),_:1}),(0,v.bF)(C,{label:"所属逃生者"},{default:(0,v.k6)((()=>[(0,v.bF)(w.A,{modelValue:k.value.survivorId,"onUpdate:modelValue":b[2]||(b[2]=e=>k.value.survivorId=e),ownerList:"survivor",width:"220px"},null,8,["modelValue"])])),_:1}),(0,v.bF)(C,null,{default:(0,v.k6)((()=>[(0,v.bF)(_,{type:"primary",onClick:S},{default:(0,v.k6)((()=>b[8]||(b[8]=[(0,v.eW)("搜索")]))),_:1}),(0,v.bF)(_,{onClick:W},{default:(0,v.k6)((()=>b[9]||(b[9]=[(0,v.eW)("重置")]))),_:1})])),_:1})])),_:1}),(0,v.bo)(((0,v.uX)(),(0,v.Wv)(N,{key:0,onSelectionChange:O,data:l.value,stripe:"",style:{width:"100%"}},{empty:(0,v.k6)((()=>[(0,v.bF)(j,{description:"没有数据"})])),default:(0,v.k6)((()=>[(0,v.bF)(M,{type:"selection",selectable:e.selectable,width:"55"},null,8,["selectable"]),(0,v.bF)(M,{type:"index",label:"序号",width:"80"}),(0,v.bF)(M,{prop:"name",label:"技能名",width:"180"}),(0,v.bF)(M,{prop:"content",label:"内容",width:"500"},{default:(0,v.k6)((({row:e})=>[(0,v.Lk)("span",{innerHTML:e.content},null,8,L)])),_:1}),(0,v.bF)(M,{prop:"imgurl",label:"照片",width:"180"},{default:(0,v.k6)((({row:e})=>[(0,v.bF)(Q,{size:60},{default:(0,v.k6)((()=>[(0,v.Lk)("img",{src:e.imgurl||(0,p.R1)(R)},null,8,x)])),_:2},1024)])),_:1}),(0,v.bF)(M,{prop:"survivorName",label:"所有者",width:"180"}),(0,v.bF)(M,{fixed:"right",label:"操作",width:"180"},{default:(0,v.k6)((({row:e})=>[(0,v.bF)(_,{icon:(0,p.R1)(g.ffu),circle:"",type:"primary",plain:"",onClick:l=>X(e)},null,8,["icon","onClick"]),(0,v.bF)(_,{icon:(0,p.R1)(g.epd),circle:"",type:"danger",plain:"",onClick:l=>U(e.id)},null,8,["icon","onClick"])])),_:1})])),_:1},8,["data"])),[[B,m.value]]),(0,v.bF)(H,{"current-page":k.value.page,"onUpdate:currentPage":b[3]||(b[3]=e=>k.value.page=e),"page-size":k.value.pageSize,"onUpdate:pageSize":b[4]||(b[4]=e=>k.value.pageSize=e),"page-sizes":[3,5,8,10],size:"large",background:!0,layout:"jumper, total, sizes, prev, pager, next",total:a.value,onSizeChange:h,onCurrentChange:A,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"]),(0,v.bF)(V,{ref_key:"articleRef",ref:y,onSuccess:$},null,512)])),_:1})])}}};const U=(0,A.A)(W,[["__scopeId","data-v-3f6b039f"]]);var T=U},8660:function(e,l,a){a.d(l,{A:function(){return c}});var t=a(3634),n=(a(8380),a(9759),a(7414),a(4603)),u=a(842),r=a(7419),o=a(9342),i=a(2303),d={__name:"OwnerSelect",props:{modelValue:{type:[Number,String]},ownerList:String,width:{type:String,default:"240px"}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,r.KR)([]),d=(0,r.KR)([]),s=async()=>{const e=await(0,o.T0)();a.value=e.data.data,a.value.unshift({id:0,name:"通用技能"}),a.value.unshift({id:null,name:"无"})},c=async()=>{const e=await(0,i.aO)();d.value=e.data.data,d.value.unshift({id:0,name:"通用技能"}),d.value.unshift({id:null,name:"无"})},v=e;console.log(v);const p=l;return s(),c(),(l,r)=>{const o=t.P9,i=t.AV;return(0,n.uX)(),(0,n.Wv)(i,{modelValue:e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=e=>p("update:modelValue",e)),style:(0,u.Tr)({width:e.width})},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)("survivor"===e.ownerList?a.value:d.value,(e=>((0,n.uX)(),(0,n.Wv)(o,{key:e.id,label:e.identity||e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","style"])}}};const s=d;var c=s}}]);
//# sourceMappingURL=978.d6e0ce55.js.map