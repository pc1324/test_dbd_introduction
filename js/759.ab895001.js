"use strict";(self["webpackChunkdbd_management_system"]=self["webpackChunkdbd_management_system"]||[]).push([[759],{2303:function(e,l,a){a.d(l,{H2:function(){return n},IO:function(){return d},XC:function(){return v},aO:function(){return u},ic:function(){return p},ii:function(){return s},kN:function(){return c},m5:function(){return o},r6:function(){return i},vL:function(){return r},vM:function(){return k},vr:function(){return m}});var t=a(5251);const n=e=>(console.log("页码信息："+e.page),console.log("每页展示："+e.pageSize),t.A.get("/killer",{params:e})),u=()=>t.A.get("/killer/all"),i=e=>t.A.get(`/killer/${e}`),r=e=>t.A.get("/killer/condition",{params:e}),o=e=>t.A.post("/admin/killer/add",e),d=e=>t.A.put("/admin/killer/update",e),s=e=>t.A.delete(`/admin/killer/delete/${e}`),c=e=>(console.log("页码信息："+e.page),console.log("每页展示："+e.pageSize),t.A.get("/skill/killer",{params:e})),p=e=>t.A.get(`/skill/killer/${e}`),v=e=>t.A.post("/admin/skill/killer/add",e),k=e=>t.A.put("/admin/skill/killer/update",e),m=e=>t.A.delete(`/admin/skill/killer/delete/${e}`)},9342:function(e,l,a){a.d(l,{IP:function(){return v},OW:function(){return k},Ow:function(){return n},Q:function(){return m},Q7:function(){return i},QW:function(){return r},T0:function(){return u},TJ:function(){return o},bf:function(){return d},fC:function(){return p},jM:function(){return s},r9:function(){return c}});var t=a(5251);const n=e=>(console.log("页码信息："+e.page),console.log("每页展示："+e.pageSize),t.A.get("/survivor",{params:e})),u=()=>t.A.get("/survivor/all"),i=e=>t.A.get(`/survivor/${e}`),r=e=>t.A.get("/survivor/name",{params:{name:e}}),o=e=>t.A.post("/admin/survivor/add",e),d=e=>t.A.put("/admin/survivor/update",e),s=e=>t.A.delete(`/admin/survivor/delete/${e}`),c=e=>(console.log("页码信息："+e.page),console.log("每页展示："+e.pageSize),t.A.get("/skill/survivor",{params:e})),p=e=>t.A.get(`/skill/survivor/${e}`),v=e=>t.A.post("/admin/skill/survivor/add",e),k=e=>t.A.put("/admin/skill/survivor/update",e),m=e=>t.A.delete(`/admin/skill/survivor/delete/${e}`)},6759:function(e,l,a){a.r(l),a.d(l,{default:function(){return X}});var t=a(1326),n=(a(8380),a(7778),a(6675)),u=(a(3594),a(2575)),i=(a(3233),a(4079)),r=(a(9234),a(988)),o=(a(3843),a(4871)),d=(a(1500),a(4849),a(3429)),s=(a(1236),a(8700),a(5718)),c=(a(4541),a(8015)),p=(a(358),a(1359),a(2033),a(5026),a(4603)),v=a(7419),k=a(7235),m=(a(289),a(1194)),f=(a(8809),a(8358)),g=(a(1514),a(6527),a(9306),a(8589),a(2279)),b=a(2303),w=a(8660),y=a(2796);a(5397);const _=["src"],F={class:"editor"};var h={__name:"KillerSkillEdit",emits:["success"],setup(e,{expose:l,emit:a}){const t=(0,v.KR)({modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}]]}}),n=(0,v.KR)(!1),u=(0,v.KR)({}),i={},r={name:"",content:"",imgurl:"",killerId:null},o=(0,v.KR)(""),h=(0,v.KR)({...r}),A=e=>{console.log(e),o.value=URL.createObjectURL(e.raw),h.value.imgurl=e.raw},S=a,V=async()=>{const e=new FormData;for(let l in h.value)e.append(l,h.value[l]);h.value.id?(await u.value.validate(),await(0,b.vM)(e),y.nk.success("修改成功"),n.value=!1,S("success","edit")):(await u.value.validate(),await(0,b.XC)(e),y.nk.success("添加成功"),n.value=!1,S("success","add")),o.value=""},R=(0,v.KR)(),C=async e=>{if(n.value=!0,e.id){const l=await(0,b.ic)(e.id);h.value=l.data.data,o.value=h.value.imgurl}else h.value={...r},o.value="",(0,p.dY)((()=>{R.value.setHTML("")}))};return l({open:C}),(e,l)=>{const a=s.WK,r=d.xE,b=f.tk,y=m.j5,S=(0,p.g2)("quill-editor"),C=c.S2,z=d.US,I=k.pw;return(0,p.uX)(),(0,p.Wv)(I,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=e=>n.value=e),title:h.value.id?"编辑技能":"新增技能",direction:"rtl",size:"50%"},{default:(0,p.k6)((()=>[(0,p.bF)(z,{ref_key:"form",ref:u,rules:i,model:h.value,"label-width":"100px"},{default:(0,p.k6)((()=>[(0,p.bF)(r,{label:"技能名",prop:"name"},{default:(0,p.k6)((()=>[(0,p.bF)(a,{modelValue:h.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value.name=e),placeholder:"请输入技能名"},null,8,["modelValue"])])),_:1}),(0,p.bF)(r,{label:"所属杀手"},{default:(0,p.k6)((()=>[(0,p.bF)(w.A,{modelValue:h.value.killerId,"onUpdate:modelValue":l[1]||(l[1]=e=>h.value.killerId=e),ownerList:"killer",width:"220px"},null,8,["modelValue"])])),_:1}),(0,p.bF)(r,{label:"技能图片",prop:"imgurl"},{default:(0,p.k6)((()=>[(0,p.bF)(y,{class:"avatar-uploader","show-file-list":!1,"auto-upload":!1,"on-change":A},{default:(0,p.k6)((()=>[o.value?((0,p.uX)(),(0,p.CE)("img",{key:0,src:o.value,class:"avatar"},null,8,_)):((0,p.uX)(),(0,p.Wv)(b,{key:1,class:"avatar-uploader-icon"},{default:(0,p.k6)((()=>[(0,p.bF)((0,v.R1)(g.FWt))])),_:1}))])),_:1})])),_:1}),(0,p.bF)(r,{label:"技能介绍",prop:"content"},{default:(0,p.k6)((()=>[(0,p.Lk)("div",F,[(0,p.bF)(S,{ref_key:"editorRef",ref:R,content:h.value.content,"onUpdate:content":l[2]||(l[2]=e=>h.value.content=e),"content-type":"html",theme:"snow",options:t.value},null,8,["content","options"])])])),_:1}),(0,p.bF)(r,null,{default:(0,p.k6)((()=>[(0,p.bF)(C,{onClick:V,type:"primary"},{default:(0,p.k6)((()=>l[4]||(l[4]=[(0,p.eW)("提交")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}},A=a(8533);const S=(0,A.A)(h,[["__scopeId","data-v-365a648a"]]);var V=S,R=a(4741),C=a(7462);a(8501);const z={class:"killer-skill-list"},I={class:"card-header"},K={class:"btns"},L=["innerHTML"],x=["src"];var W={__name:"KillerSkill",setup(e){const l=(0,v.KR)([]),a=(0,v.KR)(0),k=(0,v.KR)(!1),m=(0,v.KR)([]),f=(0,v.KR)({page:1,pageSize:5,name:"",killerId:null}),_=(0,v.KR)();(0,p.wB)((()=>f.value.killerId),(e=>console.log("killerId发生了变化",e)));const F=async()=>{k.value=!0;const e=await(0,b.kN)(f.value);console.log(e.data.data),l.value=e.data.data.rows,l.value.forEach((async e=>{const l=await(0,b.r6)(e.killerId);null!==l.data.data?e.killerIdentity=l.data.data.identity:e.killerIdentity="通用技能"})),a.value=e.data.data.total,k.value=!1},h=e=>{f.value.page=1,f.value.pageSize=e,F()},A=e=>{f.value.page=e,F()},S=()=>{f.value.page=1,F()},W=()=>{f.value.page=1,f.value.name="",f.value.killerId=null,F()},U=async e=>{console.log(e),await C.s.confirm("你确认要删除所选杀手技能吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await(0,b.vr)(e),y.nk.success("删除成功"),F()},X=()=>{_.value.open({})},T=e=>{_.value.open(e)},$=e=>{m.value=e.map((e=>e.id))},E=e=>{if("add"===e){const e=Math.ceil((a.value+1)/f.value.pageSize);f.value.page=e}F()};return F(),(e,b)=>{const y=c.S2,F=s.WK,C=d.xE,M=d.US,O=i.o8,j=o.zv,H=r.x0,Q=i.Up,B=u.aQ,N=n.Ik,P=t.L;return(0,p.uX)(),(0,p.CE)("div",z,[(0,p.bF)(N,{style:{"max-width":"100vw"}},{header:(0,p.k6)((()=>[(0,p.Lk)("div",I,[b[7]||(b[7]=(0,p.Lk)("span",null,"杀手技能列表",-1)),(0,p.Lk)("div",K,[(0,p.bF)(y,{type:"primary",onClick:X},{default:(0,p.k6)((()=>b[5]||(b[5]=[(0,p.eW)("添加杀手技能")]))),_:1}),(0,p.bF)(y,{type:"danger",onClick:b[0]||(b[0]=e=>U(m.value))},{default:(0,p.k6)((()=>b[6]||(b[6]=[(0,p.eW)("批量删除")]))),_:1})])])])),default:(0,p.k6)((()=>[(0,p.bF)(M,{inline:""},{default:(0,p.k6)((()=>[(0,p.bF)(C,{label:"杀手技能名"},{default:(0,p.k6)((()=>[(0,p.bF)(F,{modelValue:f.value.name,"onUpdate:modelValue":b[1]||(b[1]=e=>f.value.name=e),placeholder:"请输入杀手技能名"},null,8,["modelValue"])])),_:1}),(0,p.bF)(C,{label:"所属杀手"},{default:(0,p.k6)((()=>[(0,p.bF)(w.A,{modelValue:f.value.killerId,"onUpdate:modelValue":b[2]||(b[2]=e=>f.value.killerId=e),ownerList:"killer",width:"220px"},null,8,["modelValue"])])),_:1}),(0,p.bF)(C,null,{default:(0,p.k6)((()=>[(0,p.bF)(y,{type:"primary",onClick:S},{default:(0,p.k6)((()=>b[8]||(b[8]=[(0,p.eW)("搜索")]))),_:1}),(0,p.bF)(y,{onClick:W},{default:(0,p.k6)((()=>b[9]||(b[9]=[(0,p.eW)("重置")]))),_:1})])),_:1})])),_:1}),(0,p.bo)(((0,p.uX)(),(0,p.Wv)(Q,{key:0,onSelectionChange:$,data:l.value,stripe:"",style:{width:"100%"}},{empty:(0,p.k6)((()=>[(0,p.bF)(H,{description:"没有数据"})])),default:(0,p.k6)((()=>[(0,p.bF)(O,{type:"selection",selectable:e.selectable,width:"55"},null,8,["selectable"]),(0,p.bF)(O,{type:"index",label:"序号",width:"80"}),(0,p.bF)(O,{prop:"name",label:"技能名",width:"180"}),(0,p.bF)(O,{prop:"content",label:"内容",width:"500"},{default:(0,p.k6)((({row:e})=>[(0,p.Lk)("span",{innerHTML:e.content},null,8,L)])),_:1}),(0,p.bF)(O,{prop:"imgurl",label:"照片",width:"180"},{default:(0,p.k6)((({row:e})=>[(0,p.bF)(j,{size:60},{default:(0,p.k6)((()=>[(0,p.Lk)("img",{src:e.imgurl||(0,v.R1)(R)},null,8,x)])),_:2},1024)])),_:1}),(0,p.bF)(O,{prop:"killerIdentity",label:"所有者",width:"180"}),(0,p.bF)(O,{fixed:"right",label:"操作",width:"180"},{default:(0,p.k6)((({row:e})=>[(0,p.bF)(y,{icon:(0,v.R1)(g.ffu),circle:"",type:"primary",plain:"",onClick:l=>T(e)},null,8,["icon","onClick"]),(0,p.bF)(y,{icon:(0,v.R1)(g.epd),circle:"",type:"danger",plain:"",onClick:l=>U(e.id)},null,8,["icon","onClick"])])),_:1})])),_:1},8,["data"])),[[P,k.value]]),(0,p.bF)(B,{"current-page":f.value.page,"onUpdate:currentPage":b[3]||(b[3]=e=>f.value.page=e),"page-size":f.value.pageSize,"onUpdate:pageSize":b[4]||(b[4]=e=>f.value.pageSize=e),"page-sizes":[3,5,8,10],size:"large",background:!0,layout:"jumper, total, sizes, prev, pager, next",total:a.value,onSizeChange:h,onCurrentChange:A,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"]),(0,p.bF)(V,{ref_key:"articleRef",ref:_,onSuccess:E},null,512)])),_:1})])}}};const U=(0,A.A)(W,[["__scopeId","data-v-33d924a2"]]);var X=U},8660:function(e,l,a){a.d(l,{A:function(){return c}});var t=a(3634),n=(a(8380),a(9759),a(7414),a(4603)),u=a(842),i=a(7419),r=a(9342),o=a(2303),d={__name:"OwnerSelect",props:{modelValue:{type:[Number,String]},ownerList:String,width:{type:String,default:"240px"}},emits:["update:modelValue"],setup(e,{emit:l}){const a=(0,i.KR)([]),d=(0,i.KR)([]),s=async()=>{const e=await(0,r.T0)();a.value=e.data.data,a.value.unshift({id:0,name:"通用技能"}),a.value.unshift({id:null,name:"无"})},c=async()=>{const e=await(0,o.aO)();d.value=e.data.data,d.value.unshift({id:0,name:"通用技能"}),d.value.unshift({id:null,name:"无"})},p=e;console.log(p);const v=l;return s(),c(),(l,i)=>{const r=t.P9,o=t.AV;return(0,n.uX)(),(0,n.Wv)(o,{modelValue:e.modelValue,"onUpdate:modelValue":i[0]||(i[0]=e=>v("update:modelValue",e)),style:(0,u.Tr)({width:e.width})},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)("survivor"===e.ownerList?a.value:d.value,(e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.id,label:e.identity||e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","style"])}}};const s=d;var c=s}}]);
//# sourceMappingURL=759.ab895001.js.map